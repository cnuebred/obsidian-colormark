/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ColorMark
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/extension/mark.ts
var import_view = require("@codemirror/view");
var color_syntax_query_regex = () => new RegExp(/(\{(\#(.*?))?(\$(.*?))?\|)([\s\S]+?)(\})/g);
var font_color_mark__basic = import_view.ViewPlugin.fromClass(class {
  constructor(view) {
    this.decorations = this.createDecorationSet(view);
  }
  update(update) {
    var _a, _b;
    if (update.docChanged || update.viewportChanged || update.selectionSet && ((_a = update.startState.selection) == null ? void 0 : _a.main.from) == ((_b = update.startState.selection) == null ? void 0 : _b.main.to))
      this.decorations = this.createDecorationSet(update.view);
  }
  createDecorationSet(view) {
    let decorations = [];
    for (let { from, to } of view.visibleRanges) {
      const text = view.state.doc.sliceString(from, to);
      const re = color_syntax_query_regex();
      let match;
      while ((match = re.exec(text)) !== null) {
        const start = from + match.index;
        const matchStart = start + match[1].length;
        const matchEnd = matchStart + match[6].length;
        this.isEditingInsideMarkers(decorations, view);
        if (match[2])
          decorations.push(
            import_view.Decoration.mark(
              { attributes: { style: `color:#${match[3]}` } }
            ).range(matchStart, matchEnd)
          );
        if (match[4])
          decorations.push(
            import_view.Decoration.mark(
              { attributes: { style: `background-color:#${match[5]};padding:1px;border-radius:3px` } }
            ).range(matchStart, matchEnd)
          );
      }
    }
    return import_view.Decoration.set(decorations, true);
  }
  isEditingInsideMarkers(decorations, view) {
    const { from, to } = view.state.selection.main;
    const doc = view.state.doc.toString();
    const re = color_syntax_query_regex();
    let match;
    while ((match = re.exec(doc)) !== null) {
      const start = match.index;
      const matchStart = start + match[1].length;
      const matchEnd = matchStart + match[6].length;
      const end = start + match[0].length;
      if (!(from >= start && to <= end)) {
        decorations.push(import_view.Decoration.replace({}).range(start, matchStart));
        decorations.push(import_view.Decoration.replace({}).range(matchEnd, end));
      }
    }
  }
}, {
  decorations: (v) => v.decorations
});
function font_color_mark__basic_extension() {
  return font_color_mark__basic;
}

// src/static.ts
var DEFAULT_SETTINGS = {};

// main.ts
var ColorMark = class extends import_obsidian.Plugin {
  // TODO
  async onload() {
    this.registerEditorExtension(font_color_mark__basic_extension());
    this.registerMarkdownPostProcessor((element, context) => {
      var _a;
      const COLOR_SYNTAX_QUERY_REGEX = /(?<!\=\")(\{(\#(.*?))?(\$(.*?))?\|)([\s\S]+?)(\})/g;
      let match;
      const replace_key = (...match2) => {
        return `<span style="color:#${match2[3]};background-color:#${match2[5]};padding:1px;border-radius:3px">${match2[6]}</span>`;
      };
      while ((match = COLOR_SYNTAX_QUERY_REGEX.exec(element.innerHTML || "")) !== null) {
        element.innerHTML = (_a = element.innerHTML) == null ? void 0 : _a.replace(
          COLOR_SYNTAX_QUERY_REGEX,
          replace_key
        );
      }
    });
    await this.loadSettings();
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        menu.addSeparator();
        menu.addItem((item) => {
          item.setTitle("\u{1F3A8} font color");
          item.onClick((evt) => {
            showColorSubMenu(editor, "font").showAtMouseEvent(evt);
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u{1F58C}\uFE0F background color");
          item.onClick((evt) => {
            showColorSubMenu(editor, "background").showAtMouseEvent(evt);
          });
        });
      })
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var showColorSubMenu = (editor, type) => {
  const colors = {
    "Red \u{1F7E5}": "ff0000",
    "Green \u{1F7E9}": "00ff00",
    "Blue \u{1F7E6}": "0000ff",
    "Yellow \u{1F7E8}": "ffff00",
    "Purple \u{1F7EA}": "800080",
    "Orange \u{1F7E7}": "ffa500",
    "Black \u2B1B": "000000",
    "White \u2B1C": "ffffff",
    "Pink \u{1F338}": "ffc0cb",
    "Cyan \u{1F537}": "00ffff",
    "Magenta \u{1F7E3}": "ff00ff",
    "Lime \u{1F49A}": "00ff00",
    "Teal \u{1F7E9}": "008080",
    "Indigo \u{1F499}": "4b0082",
    "Maroon \u{1F7E4}": "800000",
    "Navy \u{1F535}": "000080",
    "Olive \u{1F7E2}": "808000",
    "Silver \u26AA": "c0c0c0",
    "Gold \u{1F7E1}": "ffd700",
    "Turquoise \u{1F7E6}": "40e0d0",
    "Violet \u{1F7EA}": "ee82ee"
  };
  const prefix = type == "font" ? "#" : type == "background" ? "$" : "";
  const colorMenu = new import_obsidian.Menu();
  Object.entries(colors).forEach(([colorName, colorHex]) => {
    colorMenu.addItem(
      (item) => item.setTitle(colorName).onClick((evt) => applyColor(editor, prefix + colorHex))
    );
  });
  return colorMenu;
};
function applyColor(editor, colorHex) {
  const selectedText = editor.getSelection();
  if (!selectedText) {
    new import_obsidian.Notice("No text selected.");
    return;
  }
  const coloredText = `{${colorHex}|${selectedText}}`;
  editor.replaceSelection(coloredText);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZXh0ZW5zaW9uL21hcmsudHMiLCAic3JjL3N0YXRpYy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1lbnUsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbn0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBmb250X2NvbG9yX21hcmtfX2Jhc2ljX2V4dGVuc2lvbiB9IGZyb20gJ3NyYy9leHRlbnNpb24vbWFyayc7XG5pbXBvcnQgeyBDb2xvck1hcmtTZXR0aW5ncyB9IGZyb20gJ3NyYy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL3N0YXRpYyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JNYXJrIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IGFueSAvLyBUT0RPXG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oZm9udF9jb2xvcl9tYXJrX19iYXNpY19leHRlbnNpb24oKSlcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50LCBjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBDT0xPUl9TWU5UQVhfUVVFUllfUkVHRVggPSAvKD88IVxcPVxcXCIpKFxceyhcXCMoLio/KSk/KFxcJCguKj8pKT9cXHwpKFtcXHNcXFNdKz8pKFxcfSkvZ1xuXHRcdFx0bGV0IG1hdGNoXG5cblx0XHRcdGNvbnN0IHJlcGxhY2Vfa2V5ID0gKC4uLm1hdGNoOnN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGA8c3BhbiBzdHlsZT1cImNvbG9yOiMke21hdGNoWzNdfTtiYWNrZ3JvdW5kLWNvbG9yOiMke21hdGNoWzVdfTtwYWRkaW5nOjFweDtib3JkZXItcmFkaXVzOjNweFwiPiR7bWF0Y2hbNl19PC9zcGFuPmBcblx0XHRcdFx0fVxuXG5cdFx0XHR3aGlsZSAoKG1hdGNoID0gQ09MT1JfU1lOVEFYX1FVRVJZX1JFR0VYLmV4ZWMoZWxlbWVudC5pbm5lckhUTUwgfHwgJycpKSAhPT0gbnVsbCkge1xuXHRcdFx0XHRlbGVtZW50LmlubmVySFRNTCA9IGVsZW1lbnQuaW5uZXJIVE1MPy5yZXBsYWNlKFxuXHRcdFx0XHRcdENPTE9SX1NZTlRBWF9RVUVSWV9SRUdFWCwgXG5cdFx0XHRcdFx0cmVwbGFjZV9rZXlcblx0XHRcdFx0KX1cblx0XHR9KTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKClcblx0XHRcdFx0XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZWRpdG9yLW1lbnVcIiwgKG1lbnUsIGVkaXRvcikgPT4ge1xuXHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1x1RDgzQ1x1REZBOCBmb250IGNvbG9yJylcblx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKGV2dCkgPT4ge1xuXHRcdFx0XHRcdHNob3dDb2xvclN1Yk1lbnUoZWRpdG9yLCAnZm9udCcpLnNob3dBdE1vdXNlRXZlbnQoZXZ0IGFzIE1vdXNlRXZlbnQpXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSlcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnXHVEODNEXHVERDhDXHVGRTBGIGJhY2tncm91bmQgY29sb3InKVxuXHRcdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0KSA9PiB7XG5cdFx0XHRcdFx0c2hvd0NvbG9yU3ViTWVudShlZGl0b3IsICdiYWNrZ3JvdW5kJykuc2hvd0F0TW91c2VFdmVudChldnQgYXMgTW91c2VFdmVudClcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC8vdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBDb2xvck1hcmtTZXR0aW5ncyh0aGlzLmFwcCwgdGhpcykpXG5cdFx0fVxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSlcblx0fVxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKVxuXHR9XG59XG5cbmNvbnN0IHNob3dDb2xvclN1Yk1lbnUgPSAoZWRpdG9yOiBFZGl0b3IsIHR5cGU6ICdmb250JyB8ICdiYWNrZ3JvdW5kJyk6IE1lbnUgPT4ge1xuXHQvLyBEZWZpbmljamUga29sb3JcdTAwRjN3XG5cdGNvbnN0IGNvbG9ycyA9IHtcbiAgICAnUmVkIFx1RDgzRFx1REZFNSc6ICdmZjAwMDAnLFxuICAgICdHcmVlbiBcdUQ4M0RcdURGRTknOiAnMDBmZjAwJyxcbiAgICAnQmx1ZSBcdUQ4M0RcdURGRTYnOiAnMDAwMGZmJyxcbiAgICAnWWVsbG93IFx1RDgzRFx1REZFOCc6ICdmZmZmMDAnLFxuICAgICdQdXJwbGUgXHVEODNEXHVERkVBJzogJzgwMDA4MCcsXG4gICAgJ09yYW5nZSBcdUQ4M0RcdURGRTcnOiAnZmZhNTAwJyxcbiAgICAnQmxhY2sgXHUyQjFCJzogJzAwMDAwMCcsXG4gICAgJ1doaXRlIFx1MkIxQyc6ICdmZmZmZmYnLFxuICAgICdQaW5rIFx1RDgzQ1x1REYzOCc6ICdmZmMwY2InLFxuICAgICdDeWFuIFx1RDgzRFx1REQzNyc6ICcwMGZmZmYnLFxuICAgICdNYWdlbnRhIFx1RDgzRFx1REZFMyc6ICdmZjAwZmYnLFxuICAgICdMaW1lIFx1RDgzRFx1REM5QSc6ICcwMGZmMDAnLFxuICAgICdUZWFsIFx1RDgzRFx1REZFOSc6ICcwMDgwODAnLFxuICAgICdJbmRpZ28gXHVEODNEXHVEQzk5JzogJzRiMDA4MicsXG4gICAgJ01hcm9vbiBcdUQ4M0RcdURGRTQnOiAnODAwMDAwJyxcbiAgICAnTmF2eSBcdUQ4M0RcdUREMzUnOiAnMDAwMDgwJyxcbiAgICAnT2xpdmUgXHVEODNEXHVERkUyJzogJzgwODAwMCcsXG4gICAgJ1NpbHZlciBcdTI2QUEnOiAnYzBjMGMwJyxcbiAgICAnR29sZCBcdUQ4M0RcdURGRTEnOiAnZmZkNzAwJyxcbiAgICAnVHVycXVvaXNlIFx1RDgzRFx1REZFNic6ICc0MGUwZDAnLFxuICAgICdWaW9sZXQgXHVEODNEXHVERkVBJzogJ2VlODJlZSdcbn07XG5cblx0Y29uc3QgcHJlZml4ICA9IHR5cGUgPT0gJ2ZvbnQnID8gJyMnIDogdHlwZSA9PSAnYmFja2dyb3VuZCcgPyAnJCcgOiAnJ1xuXHRjb25zdCBjb2xvck1lbnUgPSBuZXcgTWVudSgpO1xuXG5cdE9iamVjdC5lbnRyaWVzKGNvbG9ycykuZm9yRWFjaCgoW2NvbG9yTmFtZSwgY29sb3JIZXhdKSA9PiB7XG5cdFx0XHRjb2xvck1lbnUuYWRkSXRlbSgoaXRlbSkgPT4gXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShjb2xvck5hbWUpXG5cdFx0XHRcdFx0XHRcdC5vbkNsaWNrKChldnQpID0+IGFwcGx5Q29sb3IoZWRpdG9yLCBwcmVmaXggKyBjb2xvckhleCkpXG5cdFx0XHQpO1xuXHR9KTtcblx0cmV0dXJuIGNvbG9yTWVudVxufVxuXG5mdW5jdGlvbiBhcHBseUNvbG9yKGVkaXRvcjogRWRpdG9yLCBjb2xvckhleDogc3RyaW5nKSB7XG5cdGNvbnN0IHNlbGVjdGVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0aWYgKCFzZWxlY3RlZFRleHQpIHtcblx0XHRcdG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQuJyk7XG5cdFx0XHRyZXR1cm47XG5cdH1cblx0Y29uc3QgY29sb3JlZFRleHQgPSBgeyR7Y29sb3JIZXh9fCR7c2VsZWN0ZWRUZXh0fX1gO1xuXHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihjb2xvcmVkVGV4dCk7XG59IiwgImltcG9ydCB7IEVkaXRvclZpZXcsIERlY29yYXRpb24sIFZpZXdQbHVnaW4sIFZpZXdVcGRhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiXHJcbmltcG9ydCB7IFJhbmdlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCJcclxuXHJcbmNvbnN0IGNvbG9yX3N5bnRheF9xdWVyeV9yZWdleCA9ICgpID0+IG5ldyBSZWdFeHAoLyhcXHsoXFwjKC4qPykpPyhcXCQoLio/KSk/XFx8KShbXFxzXFxTXSs/KShcXH0pL2cpXHJcblxyXG5jb25zdCBmb250X2NvbG9yX21hcmtfX2Jhc2ljID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xyXG4gIGRlY29yYXRpb25zXHJcbiAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xyXG4gICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuY3JlYXRlRGVjb3JhdGlvblNldCh2aWV3KVxyXG4gIH1cclxuICB1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XHJcbiAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHxcclxuICAgICAgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fFxyXG4gICAgICAodXBkYXRlLnNlbGVjdGlvblNldCAmJiB1cGRhdGUuc3RhcnRTdGF0ZS5zZWxlY3Rpb24/Lm1haW4uZnJvbSA9PSB1cGRhdGUuc3RhcnRTdGF0ZS5zZWxlY3Rpb24/Lm1haW4udG8pKVxyXG4gICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5jcmVhdGVEZWNvcmF0aW9uU2V0KHVwZGF0ZS52aWV3KVxyXG4gIH1cclxuICBjcmVhdGVEZWNvcmF0aW9uU2V0KHZpZXc6IEVkaXRvclZpZXcpIHtcclxuICAgIGxldCBkZWNvcmF0aW9ucyA9IFtdXHJcblxyXG4gICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xyXG4gICAgICBjb25zdCB0ZXh0ID0gdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8pXHJcbiAgICAgIGNvbnN0IHJlID0gY29sb3Jfc3ludGF4X3F1ZXJ5X3JlZ2V4KClcclxuICAgICAgbGV0IG1hdGNoXHJcbiAgICAgIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gZnJvbSArIG1hdGNoLmluZGV4XHJcbiAgICAgICAgY29uc3QgbWF0Y2hTdGFydCA9IHN0YXJ0ICsgbWF0Y2hbMV0ubGVuZ3RoXHJcbiAgICAgICAgY29uc3QgbWF0Y2hFbmQgPSBtYXRjaFN0YXJ0ICsgbWF0Y2hbNl0ubGVuZ3RoXHJcbiAgICAgICAgdGhpcy5pc0VkaXRpbmdJbnNpZGVNYXJrZXJzKGRlY29yYXRpb25zLCB2aWV3KVxyXG4gICAgICAgIGlmIChtYXRjaFsyXSlcclxuICAgICAgICAgIGRlY29yYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAgIERlY29yYXRpb24ubWFyayhcclxuICAgICAgICAgICAgICB7IGF0dHJpYnV0ZXM6IHsgc3R5bGU6IGBjb2xvcjojJHttYXRjaFszXX1gIH0gfVxyXG4gICAgICAgICAgICApLnJhbmdlKG1hdGNoU3RhcnQsIG1hdGNoRW5kKSlcclxuICAgICAgICBpZiAobWF0Y2hbNF0pXHJcbiAgICAgICAgICBkZWNvcmF0aW9ucy5wdXNoKFxyXG4gICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoXHJcbiAgICAgICAgICAgICAgeyBhdHRyaWJ1dGVzOiB7IHN0eWxlOiBgYmFja2dyb3VuZC1jb2xvcjojJHttYXRjaFs1XX07cGFkZGluZzoxcHg7Ym9yZGVyLXJhZGl1czozcHhgIH0gfVxyXG4gICAgICAgICAgICApLnJhbmdlKG1hdGNoU3RhcnQsIG1hdGNoRW5kKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBEZWNvcmF0aW9uLnNldChkZWNvcmF0aW9ucywgdHJ1ZSlcclxuICB9XHJcbiAgaXNFZGl0aW5nSW5zaWRlTWFya2VycyhkZWNvcmF0aW9uczogUmFuZ2U8RGVjb3JhdGlvbj5bXSwgdmlldzogRWRpdG9yVmlldykge1xyXG4gICAgY29uc3QgeyBmcm9tLCB0byB9ID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpblxyXG5cclxuICAgIGNvbnN0IGRvYyA9IHZpZXcuc3RhdGUuZG9jLnRvU3RyaW5nKClcclxuXHJcbiAgICBjb25zdCByZSA9IGNvbG9yX3N5bnRheF9xdWVyeV9yZWdleCgpXHJcbiAgICBsZXQgbWF0Y2hcclxuICAgIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKGRvYykpICE9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0ID0gbWF0Y2guaW5kZXhcclxuICAgICAgY29uc3QgbWF0Y2hTdGFydCA9IHN0YXJ0ICsgbWF0Y2hbMV0ubGVuZ3RoXHJcbiAgICAgIGNvbnN0IG1hdGNoRW5kID0gbWF0Y2hTdGFydCArIG1hdGNoWzZdLmxlbmd0aFxyXG4gICAgICBjb25zdCBlbmQgPSBzdGFydCArIG1hdGNoWzBdLmxlbmd0aFxyXG4gICAgICBpZiAoIShmcm9tID49IHN0YXJ0ICYmIHRvIDw9IGVuZCkpIHtcclxuICAgICAgICBkZWNvcmF0aW9ucy5wdXNoKERlY29yYXRpb24ucmVwbGFjZSh7fSkucmFuZ2Uoc3RhcnQsIG1hdGNoU3RhcnQpKVxyXG4gICAgICAgIGRlY29yYXRpb25zLnB1c2goRGVjb3JhdGlvbi5yZXBsYWNlKHt9KS5yYW5nZShtYXRjaEVuZCwgZW5kKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSwge1xyXG4gIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcclxufSlcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb250X2NvbG9yX21hcmtfX2Jhc2ljX2V4dGVuc2lvbigpIHtcclxuICByZXR1cm4gZm9udF9jb2xvcl9tYXJrX19iYXNpY1xyXG59XHJcblxyXG5cclxuLy9TSE9XIHdpbmRvdyBmb3IgcmVtb3RlIGNoYW5nZXMgLSBjb21taXRzIC0+IGNoYW5nZWQgZmlsZXNcclxuXHJcbi8vIHRoaXMucmVnaXN0ZXJFdmVudChcclxuLy8gXHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1tZW51JywgKG1lbnUsIGVkaXRvcjogRWRpdG9yKSA9PiB7XHJcbi8vIFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuLy8gXHRcdFx0aXRlbVxyXG4vLyBcdFx0XHRcdC5zZXRUaXRsZShcIkdldCBCbG9ja1wiKVxyXG4vLyBcdFx0XHRcdC5zZXRJY29uKFwiYmxvY2tcIilcclxuLy8gXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcbi8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IpXHJcbi8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2Nyb2xsSW5mbygpKVxyXG4vLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coZWRpdG9yLmdldFZhbHVlKCkpXHJcbi8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0TGluZShlZGl0b3IubGlzdFNlbGVjdGlvbnMoKVswXS5oZWFkLmxpbmUpKVxyXG4vLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coZWRpdG9yLmdldERvYygpKVxyXG4vLyBcdFx0XHRcdH0pXHJcbi8vIFx0XHR9KVxyXG4vLyBcdH0pXHJcbi8vIClcclxuIiwgImltcG9ydCB7IENvbG9yTWFya1NldHRpbmdzVHlwZSB9IGZyb20gXCIuL2RcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDb2xvck1hcmtTZXR0aW5nc1R5cGUgPSB7XHJcblxyXG59XHJcblxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXdEOzs7QUNBeEQsa0JBQStEO0FBRy9ELElBQU0sMkJBQTJCLE1BQU0sSUFBSSxPQUFPLDJDQUEyQztBQUU3RixJQUFNLHlCQUF5Qix1QkFBVyxVQUFVLE1BQU07QUFBQSxFQUV4RCxZQUFZLE1BQWtCO0FBQzVCLFNBQUssY0FBYyxLQUFL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

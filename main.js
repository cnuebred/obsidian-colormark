/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ColorMark
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/extension/mark.ts
var import_view = require("@codemirror/view");
var color_syntax_query_regex = () => new RegExp(/(\{(\#(.*?))?(\$(.*?))?\|)([\s\S]+?)(\})/g);
var font_color_mark__basic = import_view.ViewPlugin.fromClass(class {
  constructor(view) {
    this.decorations = this.createDecorationSet(view);
  }
  update(update) {
    var _a, _b;
    if (update.docChanged || update.viewportChanged || update.selectionSet && ((_a = update.startState.selection) == null ? void 0 : _a.main.from) == ((_b = update.startState.selection) == null ? void 0 : _b.main.to))
      this.decorations = this.createDecorationSet(update.view);
  }
  createDecorationSet(view) {
    let decorations = [];
    for (let { from, to } of view.visibleRanges) {
      const text = view.state.doc.sliceString(from, to);
      const re = color_syntax_query_regex();
      let match;
      while ((match = re.exec(text)) !== null) {
        const start = from + match.index;
        const matchStart = start + match[1].length;
        const matchEnd = matchStart + match[6].length;
        this.isEditingInsideMarkers(decorations, view);
        if (match[2])
          decorations.push(
            import_view.Decoration.mark(
              { attributes: { style: `color:#${match[3]}` } }
            ).range(matchStart, matchEnd)
          );
        if (match[4])
          decorations.push(
            import_view.Decoration.mark(
              { attributes: { style: `background-color:#${match[5]};padding:1px;border-radius:3px` } }
            ).range(matchStart, matchEnd)
          );
      }
    }
    return import_view.Decoration.set(decorations, true);
  }
  isEditingInsideMarkers(decorations, view) {
    const { from, to } = view.state.selection.main;
    const doc = view.state.doc.toString();
    const re = color_syntax_query_regex();
    let match;
    while ((match = re.exec(doc)) !== null) {
      const start = match.index;
      const matchStart = start + match[1].length;
      const matchEnd = matchStart + match[6].length;
      const end = start + match[0].length;
      if (!(from >= start && to <= end)) {
        decorations.push(import_view.Decoration.replace({}).range(start, matchStart));
        decorations.push(import_view.Decoration.replace({}).range(matchEnd, end));
      }
    }
  }
}, {
  decorations: (v) => v.decorations
});
function font_color_mark__basic_extension() {
  return font_color_mark__basic;
}

// src/static.ts
var DEFAULT_SETTINGS = {};

// main.ts
var ColorMark = class extends import_obsidian.Plugin {
  // TODO
  async onload() {
    this.registerEditorExtension(font_color_mark__basic_extension());
    this.registerMarkdownPostProcessor((element, context) => {
      var _a;
      const COLOR_SYNTAX_QUERY_REGEX = /(?<!\=\")(\{(\#(.*?))?(\$(.*?))?\|)([\s\S]+?)(\})/g;
      let match;
      const replace_key = (...match2) => {
        return `<span style="color:#${match2[3]};background-color:#${match2[5]};padding:1px;border-radius:3px">${match2[6]}</span>`;
      };
      while ((match = COLOR_SYNTAX_QUERY_REGEX.exec(element.innerHTML || "")) !== null) {
        element.innerHTML = (_a = element.innerHTML) == null ? void 0 : _a.replace(
          COLOR_SYNTAX_QUERY_REGEX,
          replace_key
        );
      }
    });
    await this.loadSettings();
    this.addCommand({
      id: "gitlab_test_snowflake",
      name: "test",
      callback: async () => {
      }
    });
    this.addRibbonIcon("send", "Send local changes", async (evt) => {
    }).addClass("my-plugin-ribbon-class");
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        menu.addSeparator();
        menu.addItem((item) => {
          item.setTitle("\u{1F3A8} font color");
          item.onClick((evt) => {
            showColorSubMenu(editor, "font").showAtMouseEvent(evt);
          });
        });
        menu.addItem((item) => {
          item.setTitle("\u{1F58C}\uFE0F background color");
          item.onClick((evt) => {
            showColorSubMenu(editor, "background").showAtMouseEvent(evt);
          });
        });
      })
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var showColorSubMenu = (editor, type) => {
  const colors = {
    "Red \u{1F7E5}": "ff0000",
    "Green \u{1F7E9}": "00ff00",
    "Blue \u{1F7E6}": "0000ff",
    "Yellow \u{1F7E8}": "ffff00",
    "Purple \u{1F7EA}": "800080",
    "Orange \u{1F7E7}": "ffa500",
    "Black \u2B1B": "000000",
    "White \u2B1C": "ffffff",
    "Pink \u{1F338}": "ffc0cb",
    "Cyan \u{1F537}": "00ffff",
    "Magenta \u{1F7E3}": "ff00ff",
    "Lime \u{1F49A}": "00ff00",
    "Teal \u{1F7E9}": "008080",
    "Indigo \u{1F499}": "4b0082",
    "Maroon \u{1F7E4}": "800000",
    "Navy \u{1F535}": "000080",
    "Olive \u{1F7E2}": "808000",
    "Silver \u26AA": "c0c0c0",
    "Gold \u{1F7E1}": "ffd700",
    "Turquoise \u{1F7E6}": "40e0d0",
    "Violet \u{1F7EA}": "ee82ee"
  };
  const prefix = type == "font" ? "#" : type == "background" ? "$" : "";
  const colorMenu = new import_obsidian.Menu();
  Object.entries(colors).forEach(([colorName, colorHex]) => {
    colorMenu.addItem(
      (item) => item.setTitle(colorName).onClick((evt) => applyColor(editor, prefix + colorHex))
    );
  });
  return colorMenu;
};
function applyColor(editor, colorHex) {
  const selectedText = editor.getSelection();
  if (!selectedText) {
    new import_obsidian.Notice("No text selected.");
    return;
  }
  const coloredText = `{${colorHex}|${selectedText}}`;
  editor.replaceSelection(coloredText);
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZXh0ZW5zaW9uL21hcmsudHMiLCAic3JjL3N0YXRpYy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1lbnUsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbn0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBmb250X2NvbG9yX21hcmtfX2Jhc2ljX2V4dGVuc2lvbiB9IGZyb20gJ3NyYy9leHRlbnNpb24vbWFyayc7XG5pbXBvcnQgeyBDb2xvck1hcmtTZXR0aW5ncyB9IGZyb20gJ3NyYy9zZXR0aW5ncyc7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL3N0YXRpYyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JNYXJrIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IGFueSAvLyBUT0RPXG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oZm9udF9jb2xvcl9tYXJrX19iYXNpY19leHRlbnNpb24oKSlcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50LCBjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBDT0xPUl9TWU5UQVhfUVVFUllfUkVHRVggPSAvKD88IVxcPVxcXCIpKFxceyhcXCMoLio/KSk/KFxcJCguKj8pKT9cXHwpKFtcXHNcXFNdKz8pKFxcfSkvZ1xuXHRcdFx0bGV0IG1hdGNoXG5cblx0XHRcdGNvbnN0IHJlcGxhY2Vfa2V5ID0gKC4uLm1hdGNoOnN0cmluZ1tdKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGA8c3BhbiBzdHlsZT1cImNvbG9yOiMke21hdGNoWzNdfTtiYWNrZ3JvdW5kLWNvbG9yOiMke21hdGNoWzVdfTtwYWRkaW5nOjFweDtib3JkZXItcmFkaXVzOjNweFwiPiR7bWF0Y2hbNl19PC9zcGFuPmBcblx0XHRcdFx0fVxuXG5cdFx0XHR3aGlsZSAoKG1hdGNoID0gQ09MT1JfU1lOVEFYX1FVRVJZX1JFR0VYLmV4ZWMoZWxlbWVudC5pbm5lckhUTUwgfHwgJycpKSAhPT0gbnVsbCkge1xuXHRcdFx0XHRlbGVtZW50LmlubmVySFRNTCA9IGVsZW1lbnQuaW5uZXJIVE1MPy5yZXBsYWNlKFxuXHRcdFx0XHRcdENPTE9SX1NZTlRBWF9RVUVSWV9SRUdFWCwgXG5cdFx0XHRcdFx0cmVwbGFjZV9rZXlcblx0XHRcdFx0KX1cblx0XHR9KTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKClcblx0XHRcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdnaXRsYWJfdGVzdF9zbm93Zmxha2UnLFxuXHRcdFx0bmFtZTogJ3Rlc3QnLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fSlcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3NlbmQnLCAnU2VuZCBsb2NhbCBjaGFuZ2VzJywgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdH0pLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJylcblx0XHRcblx0XHRcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJlZGl0b3ItbWVudVwiLCAobWVudSwgZWRpdG9yKSA9PiB7XG5cdFx0XHRcdG1lbnUuYWRkU2VwYXJhdG9yKClcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnXHVEODNDXHVERkE4IGZvbnQgY29sb3InKVxuXHRcdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0KSA9PiB7XG5cdFx0XHRcdFx0c2hvd0NvbG9yU3ViTWVudShlZGl0b3IsICdmb250Jykuc2hvd0F0TW91c2VFdmVudChldnQgYXMgTW91c2VFdmVudClcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdcdUQ4M0RcdUREOENcdUZFMEYgYmFja2dyb3VuZCBjb2xvcicpXG5cdFx0XHRcdFx0aXRlbS5vbkNsaWNrKChldnQpID0+IHtcblx0XHRcdFx0XHRzaG93Q29sb3JTdWJNZW51KGVkaXRvciwgJ2JhY2tncm91bmQnKS5zaG93QXRNb3VzZUV2ZW50KGV2dCBhcyBNb3VzZUV2ZW50KVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0Ly90aGlzLmFkZFNldHRpbmdUYWIobmV3IENvbG9yTWFya1NldHRpbmdzKHRoaXMuYXBwLCB0aGlzKSlcblx0XHR9XG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKVxuXHR9XG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpXG5cdH1cbn1cblxuY29uc3Qgc2hvd0NvbG9yU3ViTWVudSA9IChlZGl0b3I6IEVkaXRvciwgdHlwZTogJ2ZvbnQnIHwgJ2JhY2tncm91bmQnKTogTWVudSA9PiB7XG5cdC8vIERlZmluaWNqZSBrb2xvclx1MDBGM3dcblx0Y29uc3QgY29sb3JzID0ge1xuICAgICdSZWQgXHVEODNEXHVERkU1JzogJ2ZmMDAwMCcsXG4gICAgJ0dyZWVuIFx1RDgzRFx1REZFOSc6ICcwMGZmMDAnLFxuICAgICdCbHVlIFx1RDgzRFx1REZFNic6ICcwMDAwZmYnLFxuICAgICdZZWxsb3cgXHVEODNEXHVERkU4JzogJ2ZmZmYwMCcsXG4gICAgJ1B1cnBsZSBcdUQ4M0RcdURGRUEnOiAnODAwMDgwJyxcbiAgICAnT3JhbmdlIFx1RDgzRFx1REZFNyc6ICdmZmE1MDAnLFxuICAgICdCbGFjayBcdTJCMUInOiAnMDAwMDAwJyxcbiAgICAnV2hpdGUgXHUyQjFDJzogJ2ZmZmZmZicsXG4gICAgJ1BpbmsgXHVEODNDXHVERjM4JzogJ2ZmYzBjYicsXG4gICAgJ0N5YW4gXHVEODNEXHVERDM3JzogJzAwZmZmZicsXG4gICAgJ01hZ2VudGEgXHVEODNEXHVERkUzJzogJ2ZmMDBmZicsXG4gICAgJ0xpbWUgXHVEODNEXHVEQzlBJzogJzAwZmYwMCcsXG4gICAgJ1RlYWwgXHVEODNEXHVERkU5JzogJzAwODA4MCcsXG4gICAgJ0luZGlnbyBcdUQ4M0RcdURDOTknOiAnNGIwMDgyJyxcbiAgICAnTWFyb29uIFx1RDgzRFx1REZFNCc6ICc4MDAwMDAnLFxuICAgICdOYXZ5IFx1RDgzRFx1REQzNSc6ICcwMDAwODAnLFxuICAgICdPbGl2ZSBcdUQ4M0RcdURGRTInOiAnODA4MDAwJyxcbiAgICAnU2lsdmVyIFx1MjZBQSc6ICdjMGMwYzAnLFxuICAgICdHb2xkIFx1RDgzRFx1REZFMSc6ICdmZmQ3MDAnLFxuICAgICdUdXJxdW9pc2UgXHVEODNEXHVERkU2JzogJzQwZTBkMCcsXG4gICAgJ1Zpb2xldCBcdUQ4M0RcdURGRUEnOiAnZWU4MmVlJ1xufTtcblxuXHRjb25zdCBwcmVmaXggID0gdHlwZSA9PSAnZm9udCcgPyAnIycgOiB0eXBlID09ICdiYWNrZ3JvdW5kJyA/ICckJyA6ICcnXG5cdGNvbnN0IGNvbG9yTWVudSA9IG5ldyBNZW51KCk7XG5cblx0T2JqZWN0LmVudHJpZXMoY29sb3JzKS5mb3JFYWNoKChbY29sb3JOYW1lLCBjb2xvckhleF0pID0+IHtcblx0XHRcdGNvbG9yTWVudS5hZGRJdGVtKChpdGVtKSA9PiBcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKGNvbG9yTmFtZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKGV2dCkgPT4gYXBwbHlDb2xvcihlZGl0b3IsIHByZWZpeCArIGNvbG9ySGV4KSlcblx0XHRcdCk7XG5cdH0pO1xuXHRyZXR1cm4gY29sb3JNZW51XG59XG5cbmZ1bmN0aW9uIGFwcGx5Q29sb3IoZWRpdG9yOiBFZGl0b3IsIGNvbG9ySGV4OiBzdHJpbmcpIHtcblx0Y29uc3Qgc2VsZWN0ZWRUZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRpZiAoIXNlbGVjdGVkVGV4dCkge1xuXHRcdFx0bmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZC4nKTtcblx0XHRcdHJldHVybjtcblx0fVxuXHRjb25zdCBjb2xvcmVkVGV4dCA9IGB7JHtjb2xvckhleH18JHtzZWxlY3RlZFRleHR9fWA7XG5cdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGNvbG9yZWRUZXh0KTtcbn0iLCAiaW1wb3J0IHsgRWRpdG9yVmlldywgRGVjb3JhdGlvbiwgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCJcclxuaW1wb3J0IHsgUmFuZ2UgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIlxyXG5cclxuY29uc3QgY29sb3Jfc3ludGF4X3F1ZXJ5X3JlZ2V4ID0gKCkgPT4gbmV3IFJlZ0V4cCgvKFxceyhcXCMoLio/KSk/KFxcJCguKj8pKT9cXHwpKFtcXHNcXFNdKz8pKFxcfSkvZylcclxuXHJcbmNvbnN0IGZvbnRfY29sb3JfbWFya19fYmFzaWMgPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XHJcbiAgZGVjb3JhdGlvbnNcclxuICBjb25zdHJ1Y3Rvcih2aWV3OiBFZGl0b3JWaWV3KSB7XHJcbiAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5jcmVhdGVEZWNvcmF0aW9uU2V0KHZpZXcpXHJcbiAgfVxyXG4gIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcclxuICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fFxyXG4gICAgICB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8XHJcbiAgICAgICh1cGRhdGUuc2VsZWN0aW9uU2V0ICYmIHVwZGF0ZS5zdGFydFN0YXRlLnNlbGVjdGlvbj8ubWFpbi5mcm9tID09IHVwZGF0ZS5zdGFydFN0YXRlLnNlbGVjdGlvbj8ubWFpbi50bykpXHJcbiAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmNyZWF0ZURlY29yYXRpb25TZXQodXBkYXRlLnZpZXcpXHJcbiAgfVxyXG4gIGNyZWF0ZURlY29yYXRpb25TZXQodmlldzogRWRpdG9yVmlldykge1xyXG4gICAgbGV0IGRlY29yYXRpb25zID0gW11cclxuXHJcbiAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XHJcbiAgICAgIGNvbnN0IHRleHQgPSB2aWV3LnN0YXRlLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0bylcclxuICAgICAgY29uc3QgcmUgPSBjb2xvcl9zeW50YXhfcXVlcnlfcmVnZXgoKVxyXG4gICAgICBsZXQgbWF0Y2hcclxuICAgICAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWModGV4dCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBmcm9tICsgbWF0Y2guaW5kZXhcclxuICAgICAgICBjb25zdCBtYXRjaFN0YXJ0ID0gc3RhcnQgKyBtYXRjaFsxXS5sZW5ndGhcclxuICAgICAgICBjb25zdCBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyBtYXRjaFs2XS5sZW5ndGhcclxuICAgICAgICB0aGlzLmlzRWRpdGluZ0luc2lkZU1hcmtlcnMoZGVjb3JhdGlvbnMsIHZpZXcpXHJcbiAgICAgICAgaWYgKG1hdGNoWzJdKVxyXG4gICAgICAgICAgZGVjb3JhdGlvbnMucHVzaChcclxuICAgICAgICAgICAgRGVjb3JhdGlvbi5tYXJrKFxyXG4gICAgICAgICAgICAgIHsgYXR0cmlidXRlczogeyBzdHlsZTogYGNvbG9yOiMke21hdGNoWzNdfWAgfSB9XHJcbiAgICAgICAgICAgICkucmFuZ2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQpKVxyXG4gICAgICAgIGlmIChtYXRjaFs0XSlcclxuICAgICAgICAgIGRlY29yYXRpb25zLnB1c2goXHJcbiAgICAgICAgICAgIERlY29yYXRpb24ubWFyayhcclxuICAgICAgICAgICAgICB7IGF0dHJpYnV0ZXM6IHsgc3R5bGU6IGBiYWNrZ3JvdW5kLWNvbG9yOiMke21hdGNoWzVdfTtwYWRkaW5nOjFweDtib3JkZXItcmFkaXVzOjNweGAgfSB9XHJcbiAgICAgICAgICAgICkucmFuZ2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY29yYXRpb25zLCB0cnVlKVxyXG4gIH1cclxuICBpc0VkaXRpbmdJbnNpZGVNYXJrZXJzKGRlY29yYXRpb25zOiBSYW5nZTxEZWNvcmF0aW9uPltdLCB2aWV3OiBFZGl0b3JWaWV3KSB7XHJcbiAgICBjb25zdCB7IGZyb20sIHRvIH0gPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluXHJcblxyXG4gICAgY29uc3QgZG9jID0gdmlldy5zdGF0ZS5kb2MudG9TdHJpbmcoKVxyXG5cclxuICAgIGNvbnN0IHJlID0gY29sb3Jfc3ludGF4X3F1ZXJ5X3JlZ2V4KClcclxuICAgIGxldCBtYXRjaFxyXG4gICAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMoZG9jKSkgIT09IG51bGwpIHtcclxuICAgICAgY29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleFxyXG4gICAgICBjb25zdCBtYXRjaFN0YXJ0ID0gc3RhcnQgKyBtYXRjaFsxXS5sZW5ndGhcclxuICAgICAgY29uc3QgbWF0Y2hFbmQgPSBtYXRjaFN0YXJ0ICsgbWF0Y2hbNl0ubGVuZ3RoXHJcbiAgICAgIGNvbnN0IGVuZCA9IHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoXHJcbiAgICAgIGlmICghKGZyb20gPj0gc3RhcnQgJiYgdG8gPD0gZW5kKSkge1xyXG4gICAgICAgIGRlY29yYXRpb25zLnB1c2goRGVjb3JhdGlvbi5yZXBsYWNlKHt9KS5yYW5nZShzdGFydCwgbWF0Y2hTdGFydCkpXHJcbiAgICAgICAgZGVjb3JhdGlvbnMucHVzaChEZWNvcmF0aW9uLnJlcGxhY2Uoe30pLnJhbmdlKG1hdGNoRW5kLCBlbmQpKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59LCB7XHJcbiAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xyXG59KVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvbnRfY29sb3JfbWFya19fYmFzaWNfZXh0ZW5zaW9uKCkge1xyXG4gIHJldHVybiBmb250X2NvbG9yX21hcmtfX2Jhc2ljXHJcbn1cclxuIiwgImltcG9ydCB7IENvbG9yTWFya1NldHRpbmdzVHlwZSB9IGZyb20gXCIuL2RcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDb2xvck1hcmtTZXR0aW5nc1R5cGUgPSB7XHJcblxyXG59XHJcblxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXdEOzs7QUNBeEQsa0JBQStEO0FBRy9ELElBQU0sMkJBQTJCLE1BQU0sSUFBSSxPQUFPLDJDQUEyQztBQUU3RixJQUFNLHlCQUF5Qix1QkFBVyxVQUFVLE1BQU07QUFBQSxFQUV4RCxZQUFZLE1BQWtCO0FBQzVCLFNBQUssY0FBYyxLQUFLLG9CQUFvQixJQUFJO0FBQUEsRUFDbEQ7QUFBQSxFQUNBLE9BQU8sUUFBb0I7QUFWN0I7QUFXSSxRQUFJLE9BQU8sY0FDVCxPQUFPLG1CQUNOLE9BQU8sa0JBQWdCLFlBQU8sV0FBVyxjQUFsQixtQkFBNkIsS0FBSyxXQUFRLFlBQU8sV0FBVyxjQUFsQixtQkFBNkIsS0FBSztBQUNwRyxXQUFLLGNBQWMsS0FBSyxvQkFBb0IsT0FBTyxJQUFJO0FBQUEsRUFDM0Q7QUFBQSxFQUNBLG9CQUFvQixNQUFrQjtBQUNwQyxRQUFJLGNBQWMsQ0FBQztBQUVuQixhQUFTLEVBQUUsTUFBTSxHQUFHLEtBQUssS0FBSyxlQUFlO0FBQzNDLFlBQU0sT0FBTyxLQUFLLE1BQU0sSUFBSSxZQUFZLE1BQU0sRUFBRTtBQUNoRCxZQUFNLEtBQUsseUJBQXlCO0FBQ3BDLFVBQUk7QUFDSixj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
